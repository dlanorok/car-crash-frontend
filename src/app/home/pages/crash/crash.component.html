<div class="main-content">
  <div *ngIf="crash$ | async | amICreator" class="todo-item" [routerLink]="'invite'">
    Invite others
    <div class="d-flex align-items-center">
      <i *ngIf="questionnaires.length <= 1" class="bi bi-circle"></i>
      <i *ngIf="questionnaires.length > 1" class="bi bi-check-circle"></i>
    </div>
  </div>

  <ng-container *ngFor="let questionnaire of questionnaires; let questionnaireIndex = index">
    <details [open]="questionnaireIndex === 0">
      <summary>{{ questionnaire | carIdentifier : questionnaireIndex }}</summary>
      <div
        *ngFor="let section of questionnaire.data.sections; let i = index"
        class="todo-item"
        [routerLink]="'questionnaires/' + questionnaire.id + '/sections/' + section.id + '/steps/' + section.starting_step"
      >
        <div>
          {{ section.name }}
          <small *ngIf="section.helpText">
            {{ section.helpText }}
          </small>
        </div>
        <div class="d-flex align-items-center">
          <ng-container [ngSwitch]="(section | getStateFromPipe : questionnaire)">
            <i *ngSwitchCase="ModelState.empty" class="bi bi-circle"></i>
            <i *ngSwitchCase="ModelState.validated" class="bi bi-check-circle"></i>
            <i *ngSwitchCase="ModelState.partial" class="bi bi-question-circle"></i>
          </ng-container>
        </div>
      </div>
    </details>
  </ng-container>
</div>

